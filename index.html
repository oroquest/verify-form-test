<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Sikura – Adressbestätigung</title>
  <style>
    :root{--bg:#f5f6f8;--card:#fff;--border:#e5e7eb;--muted:#6b7280;--accent:#0f172a;--error:#b91c1c;--ok:#065f46}
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);margin:0}
    .container{max-width:760px;margin:32px auto;background:var(--card);padding:24px;border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.06)}
    .language-switcher{display:flex;justify-content:flex-end;margin-bottom:8px}
    .logo{height:48px;margin-bottom:12px}
    h2{margin:0 0 6px 0}
    .hint{color:var(--muted);font-size:14px;margin:0 0 12px 0}
    .ctx{background:#f9fafb;border:1px solid var(--border);padding:12px;border-radius:10px;margin:12px 0 16px}
    label{display:block;margin:12px 0 6px;font-weight:600}
    input[type=text],select,textarea{width:100%;padding:12px;border:1px solid #d1d5db;border-radius:10px;font-size:16px;background:#fff}
    input[readonly]{background:#f3f4f6;color:#6b7280}
    .row{display:flex;gap:16px}
    .row>div{flex:1}
    .hidden{display:none}
    .error-field{border-color:var(--error)!important}
    #gate-error{padding:8px 12px;background:#fff1f2;border:1px solid #fecdd3;border-radius:10px;color:var(--error);margin:8px 0}
    #gate-ok{color:var(--ok);margin:8px 0}
    button{margin-top:18px;padding:12px 18px;border:0;background:var(--accent);color:#fff;border-radius:10px;font-size:16px;cursor:pointer}
    button:disabled{opacity:.6;cursor:not-allowed}
    .linkline{margin-top:4px}
  </style>
</head>
<body>
  <div class="container">
    <div class="language-switcher">
      <select id="language">
        <option value="de">Deutsch</option>
        <option value="it">Italiano</option>
        <option value="en">English</option>
      </select>
    </div>

    <img src="siku_logo.png" alt="Sikura Life" class="logo"/>
    <h2 id="title">Bitte bestätigen Sie Ihre Adresse</h2>
    <p id="intro" class="hint">Felder sind vorbefüllt und können bei Bedarf aktualisiert werden.</p>
    <div id="ctx-box" class="ctx">Bitte geben Sie Ihre vollständigen und korrekten Adressdaten ein.</div>

    <div id="gate-error" class="hidden" role="alert" aria-live="polite"></div>
    <div id="gate-ok" class="hidden"></div>

    <form id="verify-form" class="hidden" method="POST" action="/.netlify/functions/verify_submit" novalidate>
      <input type="hidden" id="email" name="email"/>
      <input type="hidden" id="lang" name="lang"/>
      <input type="hidden" id="id" name="id"/>
      <input type="hidden" id="token" name="token"/>
      <input type="hidden" id="em" name="em"/>

      <label for="glaeubiger" id="lbl-glaeubiger">Gläubiger‑Nr.</label>
      <input type="text" id="glaeubiger" name="glaeubiger" readonly required/>

      <label for="firstname" id="lbl-firstname">Vorname</label>
      <input type="text" id="firstname" name="firstname" required readonly/>

      <label for="name" id="lbl-name">Nachname</label>
      <input type="text" id="name" name="name" required readonly/>

      <div class="row">
        <div>
          <label for="strasse" id="lbl-strasse">Strasse</label>
          <input type="text" id="strasse" name="strasse" required/>
        </div>
        <div style="max-width:180px;">
          <label for="hausnummer" id="lbl-hausnummer">Nr.</label>
          <input type="text" id="hausnummer" name="hausnummer" required/>
        </div>
      </div>

      <div class="row">
        <div style="max-width:200px;">
          <label for="plz" id="lbl-plz">PLZ</label>
          <input type="text" id="plz" name="plz" required inputmode="numeric" pattern="\d*" autocomplete="postal-code"/>
        </div>
        <div>
          <label for="ort" id="lbl-ort">Ort</label>
          <input type="text" id="ort" name="ort" required/>
        </div>
      </div>

      <label for="country" id="lbl-country">Land</label>
      <input type="text" id="country" name="country" required/>

      <div class="linkline">
        <a id="privacy-link" href="privacy.html?lang=de" target="_blank" rel="noopener">Datenschutzhinweise</a>
      </div>

      <button type="submit" id="btn-submit">Absenden</button>
      <div class="hint" id="hint-expiry">Hinweis: Der Bestätigungslink ist aus Sicherheitsgründen 7 Tage gültig.</div>
    </form>
  </div>

  <script src="/app.js" defer></script>
</body>
</html>
